<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Pemesanan</title>
  <script src="assets/js/jquery-3.7.1.js"></script>
  <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
</head>

<body>
  <nav class="navbar sticky-top bg-primary navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <img src="assets/img/logo-best-hotel.png" alt="Logo" width="60" height="48"
          class="d-inline-block align-text-center" />
        <b>Best Hotel</b>
      </a>
    </div>
    <div class="container-fluid navbar navbar-dark navbar-expand-lg">
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="kamar.html">Kamar</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="fasilitas.html">Fasilitas</a>
        </li>
          <li class="nav-item">
            <a class="nav-link" href="pemesanan.html">Pesan Sekarang</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="card border-dark m-4">
      <div class="card-header bg-transparent border-dark text-center">
        <p class="fs-4 fw-bold">FORM PEMESANAN</p>
      </div>
      <div class="card-body">
        <form action="" id="pemesananForm">
          <div class="row g-4">
            <div class="col-2">
              <label for="nama_pemesan" class="form-label">Nama Pemesan</label>
            </div>
            <div class="col-md-10">
              <input type="text" name="nama_pemesan" class="form-control" id="nama_pemesan" required>
            </div>
            <div class="col-2">
              <label for="JenisKelamin" class="form-label">Jenis Kelamin</label>
            </div>
            <div class="col-md-10">
              <select id="jenisKelamin" name="jenisKelamin" class="form-select" required>
                <option value="" selected>--Pilih Jenis Kelamin--</option>
                <option value="Laki-laki">Laki-laki</option>
                <option value="Perempuan">Perempuan</option>
              </select>
            </div>
            <div class="col-2">
              <label for="no_identitas" class="form-label">No Identitas</label>
            </div>
            <div class="col-md-10">
              <input type="number" name="no_identitas" id="no_identitas" class="form-control" required>
              <span id="no_identitas_error" style="color: red; display: none;">Isian salah, harus 16 digit</span>
            </div>
            <div class="col-2">
              <label for="tipe_kamar" class="form-label">Tipe Kamar</label>
            </div>
            <div class="col-md-10">
              <select name="tipe_kamar" id="tipe_kamar" class="form-select" required>
                <option selected>--Pilih Tipe Kamar--</option>
                <option value="Standar">Standar</option>
                <option value="Deluxe">Deluxe</option>
                <option value="Family">Family</option>
              </select>
            </div>
            <div class="col-2">
              <label for="harga" class="form-label">Harga</label>
            </div>
            <div class="col-md-10">
              <input type="number" name="harga" id="harga" class="form-control" required readonly>
            </div>
            <div class="col-2">
              <label for="tgl_pesan" class="form-label">Tanggal Pesan</label>
            </div>
            <div class="col-md-10">
              <input type="date" class="form-control" name="tgl_pesan" id="tgl_pesan" required>
            </div>
            <div class="col-2">
              <label for="durasi_menginap" class="form-label">Durasi Menginap</label>
            </div>
            <div class="col-md-2">
              <input type="number" class="form-control" name="durasi_menginap" id="durasi_menginap" min="1" required>
              <span id="durasi_error" style="color: red; display: none;">Isian harus angka</span>
            </div>
            <div class="col-md-8">
              <label class="form-label">Hari</label>
            </div>
            <div class="col-2">
              <label for="breakfast" class="form-label">Termasuk Breakfast</label>
            </div>
            <div class="col-md-10">
              <input type="checkbox" name="breakfast" id="breakfast" class="form-check-input"> Ya
            </div>
            <div class="col-2">
              <label for="total_bayar" class="form-label">Total Bayar</label>
            </div>
            <div class="col-md-10">
              <input type="number" name="total_bayar" id="total_bayar" class="form-control" readonly>
            </div>
            <div class="col text-center">
              <button type="submit" id="simpanBtn" class="btn btn-lg btn-success m-2">SIMPAN</button>
              <button type="reset" id="batalBtn" class="btn btn-lg  btn-danger m-2">BATAL</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div id="resume" class="m-4" style="display: none;">
      <div class="card border-dark">
        <div class="card-header bg-transparent border-dark text-center">
          <p class="fs-4 fw-bold">Data Resume Pemesanan:</p>
        </div>
        <div class="card-body">
          <table>
            <tr>
              <td><strong>Nama Pemesan</strong></td>
              <td>: <span id="resume_nama"></span></td>
            </tr>
            <tr>
              <td><strong>No Identitas</strong></td>
              <td>: <span id="resume_identitas"></span></td>
            </tr>
            <tr>
              <td><strong>Jenis Kelamin</strong></td>
              <td>: <span id="resume_jenisKelamin"></span></td>
            </tr>
            <tr>
              <td><strong>Tipe Kamar</strong></td>
              <td>: <span id="resume_tipeKamar"></span></td>
            </tr>
            <tr>
              <td><strong>Durasi Menginap</strong></td>
              <td>: <span id="resume_durasi"></span> Hari</td>
            </tr>
            <tr>
              <td><strong>Tanggal Pesan</strong></td>
              <td>: <span id="resume_tanggalPesan"></span></td>
            </tr>
            <tr>
              <td><strong>Diskon</strong></td>
              <td>: <span id="resume_diskon"></span></td>
            </tr>
            <tr>
              <td><strong>Total Bayar</strong></td>
              <td>: <span id="resume_totalBayar"></span></td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>




  <footer class="footer" style="background-color: darkblue; color: white; 
                    padding: 20px; text-align: center;">
    &copy; 2024 Queen Best Hotel
  </footer>

  <script>
    $(document).ready(function () {
      // Harga berdasarkan tipe kamar
      const hargaKamar = {
        "Standar": 500000,
        "Deluxe": 750000,
        "Family": 1000000
      };

      // Update harga berdasarkan tipe kamar
      $('#tipe_kamar').change(function () {
        const tipeKamar = $(this).val();
        if (tipeKamar) {
          $('#harga').val(hargaKamar[tipeKamar]);
        } else {
          $('#harga').val('');
        }
      });

      // Validasi nomor identitas harus 16 digit
      $('#no_identitas').on('input', function () {
        const noIdentitas = $(this).val();
        if (noIdentitas.length !== 16) {
          $('#no_identitas_error').show();
        } else {
          $('#no_identitas_error').hide();
        }
      });

      // Validasi durasi menginap
      $('#durasi_menginap').on('input', function () {
        const durasi = $(this).val();
        if (isNaN(durasi)) {
          $('#durasi_error').show();
        } else {
          $('#durasi_error').hide();
        }
      });

      $('#breakfast').change(function () {
        // Ambil nilai harga dan durasi menginap
        const harga = parseInt($('#harga').val());
        const durasiMenginap = parseInt($('#durasi_menginap').val());
        const isBreakfastChecked = $(this).is(':checked');

        if (!isNaN(harga) && !isNaN(durasiMenginap)) {
          let totalBayar = harga * durasiMenginap;

          // Diskon 10% jika durasi menginap lebih dari 3 hari
          if (durasiMenginap > 3) {
            const diskon = 0.1 * totalBayar;
            totalBayar -= diskon;
          }

          // Tambahkan harga breakfast jika checkbox dicentang
          if (isBreakfastChecked) {
            totalBayar += 80000;
          }

          // Update total bayar di input field
          $('#total_bayar').val(totalBayar);
        }
      });

      // Hitung total bayar dan diskon
      $('#pemesananForm').submit(function (event) {
        event.preventDefault();

        const namaPemesan = $('#nama_pemesan').val();
        const jenisKelamin = $('#jenisKelamin').val();
        const noIdentitas = $('#no_identitas').val();
        const tipeKamar = $('#tipe_kamar').val();
        const harga = parseInt($('#harga').val());
        const tglPesan = $('#tgl_pesan').val();  // Tanggal Pesan
        const durasiMenginap = parseInt($('#durasi_menginap').val());
        const breakfast = $('#breakfast').is(':checked');

        let diskon = 0;
        let totalBayar = harga * durasiMenginap;

        // Diskon 10% jika durasi menginap lebih dari 3 hari
        if (durasiMenginap > 3) {
          diskon = 0.1 * totalBayar;
          totalBayar -= diskon;
        }

        // Tambahan harga jika breakfast dipilih
        if (breakfast) {
          totalBayar += 80000;
        }

        // Menampilkan hasil di Total Bayar input field
        $('#total_bayar').val(totalBayar);

        // Resume data pemesanan
        $('#resume_nama').text(namaPemesan);
        $('#resume_identitas').text(noIdentitas);
        $('#resume_jenisKelamin').text(jenisKelamin);
        $('#resume_tipeKamar').text(tipeKamar);
        $('#resume_durasi').text(durasiMenginap);
        $('#resume_tanggalPesan').text(tglPesan);  // Menampilkan Tanggal Pesan
        $('#resume_diskon').text(diskon ? 'Rp. ' + diskon.toLocaleString() : 'Tidak ada diskon');
        $('#resume_totalBayar').text('Rp. ' + totalBayar.toLocaleString());

        // Menampilkan resume pemesanan
        $('#resume').show();
      });
    });
  </script>
  <script src="assets/js/bootstrap.bundle.min.js"></script>
</body>
</html>